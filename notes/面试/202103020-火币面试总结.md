#  202103020-火币面试总结

## CAP

### CAP是什么
C 数据一致性（Consistency）： 系统对一个写操作，如果成功，后续读操作必须读到前面成功写的数据；如果失败，后续读操作也必须读不到，对于服务调用者而言：是数据的强一致性
A 服务可用性(availability)： 所有读写请求都会在一定时间响应，可终止、不会一直等待
P 分区容错性(partition)：在网络分区下，被隔离的节点应该都可以提供服务
* 在分布式环境下，降低单个服务处理压力，分区肯定是必要选项，那我们只需考虑数据一致性和服务可用性（2选1），一般情况我们允许一段时间内数据一致性（补偿、冲正措施等）
* eurake满足CA，还是CP，以及其他组件各自满足哪个场景
### 实例
* zookeeper 满足CP
>ZooKeeper是分布式协调服务，它的职责是保证数据
即任何时刻对ZooKeeper的访问请求能得到一致的数据结果，同时系统对网络分割具备容错性；但是它不能保证每次服务请求的可用性
对于Service发现服务而言，宁可返回某服务5分钟之前在哪几个服务器上可用的信息，也不能因为暂时的网络故障而找不到可用的服务器，而不返回任何结果
>，当master节点因为网络故障与其他节点失去联系时，剩余节点会重新进行leader选举。问题在于，选举leader的时间太长，30 ~ 120s, 且选举期间整个zk集群都是不可用的，这就导致在选举期间注册服务瘫痪。
>在云部署的环境下，因网络问题使得zk集群失去master节点是较大概率会发生的事，虽然服务能够最终恢复，但是漫长的选举时间导致的注册长期不可用是不能容忍的
* eurake 满足AP
>Eureka各个节点都是平等的，几个节点挂掉不会影响正常节点的工作，剩余的节点依然可以提供注册和查询服务。
>而Eureka的客户端在向某个Eureka注册或如果发现连接失败，则会自动切换至其它节点，只要有一台Eureka还在，就能保证注册服务可用(保证可用性)，
>只不过查到的信息可能不是最新的(不保证强一致性)。除此之外，Eureka还有一种自我保护机制，
>如果在15分钟内超过85%的节点都没有正常的心跳，那么Eureka就认为客户端与注册中心出现了网络故障，开启自我保护机制，此时会出现以下几种情况：
 1. Eureka不再从注册列表中移除因为长时间没收到心跳而应该过期的服务
 2. Eureka仍然能够接受新服务的注册和查询请求，但是不会被同步到其它节点上(即保证当前节点依然可用)
 3. 当网络稳定时，当前实例新的注册信息会被同步到其它节点中
 
 因此， Eureka可以很好的应对因网络故障导致部分节点失去联系的情况，而不会像zookeeper那样使整个注册服务瘫痪。

### 事务的四个特性：原子性(Atomcity)  、数据一致性(Consistency)、隔离性(Ioslation)、持久化(Durability)；


## eurake和Nocas各自原理是什么、 区别是什么

### eurake原理
* Eureka Server 集群相互之间通过 Replicate 来同步数据，相互之间不区分主节点和从节点，所有的节点都是平等的；集群采用异步方式同步的，所以不保证节点间的状态一定是一致的，不过基本能保证最终状态是一致的
* Eureka Client会默认30s向Eureka Server发送一次心跳，告知Client状态状态可用，在90s Eureka Server没有收client到心跳，server会从注册表中剔除当前client；发送心跳返回获取到最新的服务注册列表，当client缓存和返回的注册信息不同是，Eureka Cilent会自动更新
* Eureka Sever 内部有二层缓存机制来维护整个注册表

* 自我保护机制  （上述已有）

## feign调用遇见的什么坑吗


## mybatis源码中有哪些组件，作用是什么，例如session

## 索引

* 索引建立时已varchar类型，但是传值时：int类型，是否什么生效，如果不生效，为什么不生效

## MQ

* kafka集群下怎么实现数据不丢失，kaka多个partition怎么选举
* rabbitmq的交换机有哪些属性


## redis

* redis的分布式锁实现原理，大并发获取时那些场景会出现死锁，
* redis的底层是什么语言写的
* redis的sortSet底层实现

## 熔断的原理和作用


## 算法 
* 跳表算法
* 从1+2+3+4.....+10000 ,用10线程同步执行，怎么实现
* 一个字符串，依次翻转，怎么实现  

##  rpt的项目有哪些
* doubble和springcloud区别
* doubble的实现原理，为什么比springclould性能搞

## error和exception区别

## 项目中链路跟踪使用哪个，原理是什么
* tracedId的实现原理


## bpmn的点对点模式

## hashmap怎么减少碰撞，hash值是怎么


## 从1+2+3+4.....+10000 ,用10线程并行执行，怎么实现


## classLocader有哪些 和双亲委派 作用